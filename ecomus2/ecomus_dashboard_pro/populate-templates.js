#!/usr/bin/env node

/**
 * Script pour peupler la base de donnÃ©es avec des templates rÃ©els
 * Usage: node populate-templates.js
 */

const mongoose = require('mongoose');
require('dotenv').config();

// Schema Template simplifiÃ© pour le script
const TemplateSchema = new mongoose.Schema({
  name: { type: String, required: true },
  slug: { type: String, required: true, unique: true },
  description: { type: String, default: "" },
  category: { type: String, required: true },
  tags: [{ type: String }],
  previewUrl: String,
  previewImage: String,
  components: { type: mongoose.Schema.Types.Mixed, default: {} },
  features: [{ type: String }],
  price: { type: Number, default: 0 },
  isPremium: { type: Boolean, default: false },
  isActive: { type: Boolean, default: true },
  downloadCount: { type: Number, default: 0 },
  rating: { type: Number, default: 0, min: 0, max: 5 },
  reviews: { type: Number, default: 0 },
  author: {
    id: { type: String, required: true },
    name: { type: String, required: true },
    email: { type: String, required: true }
  },
  version: { type: String, default: "1.0.0" },
  compatibility: [{ type: String }],
}, { timestamps: true });

const Template = mongoose.model('Template', TemplateSchema);

// Templates complets Ã  insÃ©rer (basÃ©s sur la liste originale + nouveaux)
const templatesToInsert = [
  // Templates de base existants
  {
    name: 'Default Template',
    slug: 'home-01',
    description: 'Template par dÃ©faut polyvalent, parfait pour dÃ©buter votre boutique en ligne.',
    category: 'Business',
    tags: ['default', 'polyvalent', 'standard'],
    previewImage: '/images/templates/home-01.svg',
    previewUrl: '/preview/home-01',
    components: { sections: ['hero', 'products', 'footer'], layout: 'standard' },
    features: ['Responsive Design', 'SEO Ready', 'Easy Setup'],
    price: 0,
    isPremium: false,
    isActive: true,
    downloadCount: 1250,
    rating: 4.2,
    reviews: 89,
    author: { id: 'admin-001', name: 'Ecomus Team', email: 'admin@ecomus.com' },
    version: '1.0.0',
    compatibility: ['latest', 'v2.0', 'v1.9']
  },
  {
    name: 'Fashion Basic',
    slug: 'home-02',
    description: 'Template fashion essentiel avec mise en page Ã©purÃ©e pour vÃªtements et accessoires.',
    category: 'Fashion',
    tags: ['fashion', 'basic', 'vÃªtements'],
    previewImage: '/images/templates/home-02.svg',
    previewUrl: '/preview/home-02',
    components: { sections: ['hero-slider', 'collection', 'featured'], layout: 'fashion' },
    features: ['Product Grid', 'Quick View', 'Color Variants'],
    price: 19,
    isPremium: true,
    isActive: true,
    downloadCount: 890,
    rating: 4.5,
    reviews: 67,
    author: { id: 'designer-001', name: 'Sarah Chen', email: 'sarah@ecomus.com' },
    version: '1.5.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Electronics Store',
    slug: 'home-03',
    description: 'Template spÃ©cialisÃ© pour produits Ã©lectroniques avec fiches techniques dÃ©taillÃ©es.',
    category: 'Tech',
    tags: ['electronics', 'tech', 'gadgets'],
    previewImage: '/images/templates/home-03.svg',
    previewUrl: '/preview/home-03',
    components: { sections: ['hero-banner', 'categories', 'specs'], layout: 'tech' },
    features: ['Spec Comparison', 'Product Filters', 'Tech Reviews'],
    price: 35,
    isPremium: true,
    isActive: true,
    downloadCount: 567,
    rating: 4.7,
    reviews: 43,
    author: { id: 'developer-001', name: 'Alex Rodriguez', email: 'alex@ecomus.com' },
    version: '1.8.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Jewelry Showcase',
    slug: 'home-04',
    description: 'Template Ã©lÃ©gant pour bijoux avec galerie haute dÃ©finition et zoom dÃ©taillÃ©.',
    category: 'Luxury',
    tags: ['jewelry', 'luxury', 'bijoux'],
    previewImage: '/images/templates/home-04.svg',
    previewUrl: '/preview/home-04',
    components: { sections: ['luxury-hero', 'gallery', 'certificates'], layout: 'luxury' },
    features: ['HD Gallery', 'Zoom Function', 'Certificate Display'],
    price: 69,
    isPremium: true,
    isActive: true,
    downloadCount: 234,
    rating: 4.9,
    reviews: 28,
    author: { id: 'designer-002', name: 'Marie Dubois', email: 'marie@ecomus.com' },
    version: '1.3.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Cosmetic Paradise',
    slug: 'home-05',
    description: 'Template beautÃ© avec sÃ©lecteur de teintes et tutoriels makeup intÃ©grÃ©s.',
    category: 'Beauty',
    tags: ['cosmetic', 'beauty', 'makeup'],
    previewImage: '/images/templates/home-05.svg',
    previewUrl: '/preview/home-05',
    components: { sections: ['beauty-hero', 'shade-finder', 'tutorials'], layout: 'beauty' },
    features: ['Shade Matcher', 'Video Tutorials', 'Before/After'],
    price: 45,
    isPremium: true,
    isActive: true,
    downloadCount: 789,
    rating: 4.6,
    reviews: 92,
    author: { id: 'beauty-expert-001', name: 'Emma Johnson', email: 'emma@ecomus.com' },
    version: '2.1.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Food & Grocery',
    slug: 'home-06',
    description: 'Template alimentaire avec gestion des produits frais et dates d\'expiration.',
    category: 'Food',
    tags: ['food', 'grocery', 'fresh'],
    previewImage: '/images/templates/home-06.svg',
    previewUrl: '/preview/home-06',
    components: { sections: ['fresh-hero', 'categories', 'delivery'], layout: 'grocery' },
    features: ['Freshness Indicator', 'Delivery Slots', 'Recipe Suggestions'],
    price: 0,
    isPremium: false,
    isActive: true,
    downloadCount: 1456,
    rating: 4.3,
    reviews: 156,
    author: { id: 'admin-001', name: 'Ecomus Team', email: 'admin@ecomus.com' },
    version: '1.9.0',
    compatibility: ['latest', 'v2.0', 'v1.9']
  },
  {
    name: 'Furniture Showroom',
    slug: 'home-07',
    description: 'Template mobilier avec visualiseur 3D et configurateur de piÃ¨ces.',
    category: 'Home',
    tags: ['furniture', 'home', '3d'],
    previewImage: '/images/templates/home-07.svg',
    previewUrl: '/preview/home-07',
    components: { sections: ['3d-viewer', 'room-planner', 'materials'], layout: 'furniture' },
    features: ['3D Visualization', 'Room Planner', 'Material Samples'],
    price: 55,
    isPremium: true,
    isActive: true,
    downloadCount: 445,
    rating: 4.4,
    reviews: 67,
    author: { id: 'designer-003', name: 'Lucas Martin', email: 'lucas@ecomus.com' },
    version: '1.6.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Kids World',
    slug: 'home-08',
    description: 'Template enfants colorÃ© avec jeux interactifs et contrÃ´les parentaux.',
    category: 'Kids',
    tags: ['kids', 'children', 'playful'],
    previewImage: '/images/templates/home-08.svg',
    previewUrl: '/preview/home-08',
    components: { sections: ['playful-hero', 'age-groups', 'safety'], layout: 'kids' },
    features: ['Age Selection', 'Safety Info', 'Parental Controls'],
    price: 29,
    isPremium: true,
    isActive: true,
    downloadCount: 678,
    rating: 4.8,
    reviews: 134,
    author: { id: 'designer-004', name: 'Sophie Williams', email: 'sophie@ecomus.com' },
    version: '1.7.2',
    compatibility: ['latest', 'v2.0']
  },
  // Templates Ã©tendus de la liste originale
  {
    name: 'Fashion Accessories',
    slug: 'home-accessories',
    description: 'Template spÃ©cialisÃ© pour accessoires de mode : sacs, ceintures, bijoux fantaisie.',
    category: 'Fashion',
    tags: ['accessories', 'fashion', 'bags', 'belts'],
    previewImage: '/images/templates/home-accessories.svg',
    previewUrl: '/preview/home-accessories',
    components: { sections: ['accessories-hero', 'categories', 'lookbook'], layout: 'accessories' },
    features: ['Accessory Matcher', 'Style Guide', 'Mix & Match'],
    price: 25,
    isPremium: true,
    isActive: true,
    downloadCount: 334,
    rating: 4.5,
    reviews: 48,
    author: { id: 'designer-005', name: 'Isabella Franco', email: 'isabella@ecomus.com' },
    version: '1.4.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Activewear Pro',
    slug: 'home-activewear',
    description: 'Template sport et fitness avec guide des tailles et conseils d\'entraÃ®nement.',
    category: 'Sports',
    tags: ['activewear', 'sport', 'fitness'],
    previewImage: '/images/templates/home-activewear.svg',
    previewUrl: '/preview/home-activewear',
    components: { sections: ['sport-hero', 'activities', 'size-guide'], layout: 'sport' },
    features: ['Size Guide', 'Workout Tips', 'Performance Tracking'],
    price: 39,
    isPremium: true,
    isActive: true,
    downloadCount: 567,
    rating: 4.6,
    reviews: 89,
    author: { id: 'sport-expert-001', name: 'Marcus Thompson', email: 'marcus@ecomus.com' },
    version: '1.5.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Baby Store',
    slug: 'home-baby',
    description: 'Template dÃ©diÃ© aux produits bÃ©bÃ© avec guides parentaux et certifications sÃ©curitÃ©.',
    category: 'Kids',
    tags: ['baby', 'infants', 'safety'],
    previewImage: '/images/templates/home-baby.svg',
    previewUrl: '/preview/home-baby',
    components: { sections: ['baby-hero', 'age-stages', 'safety-certs'], layout: 'baby' },
    features: ['Age Stages', 'Safety Certifications', 'Parent Guides'],
    price: 35,
    isPremium: true,
    isActive: true,
    downloadCount: 445,
    rating: 4.7,
    reviews: 76,
    author: { id: 'baby-expert-001', name: 'Rachel Green', email: 'rachel@ecomus.com' },
    version: '1.3.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Bookstore Literary',
    slug: 'home-bookstore',
    description: 'Template librairie avec recherche avancÃ©e, critiques et recommandations personnalisÃ©es.',
    category: 'Books',
    tags: ['books', 'literature', 'reading'],
    previewImage: '/images/templates/home-bookstore.svg',
    previewUrl: '/preview/home-bookstore',
    components: { sections: ['book-hero', 'genres', 'reviews'], layout: 'literary' },
    features: ['Advanced Search', 'Book Reviews', 'Reading Recommendations'],
    price: 0,
    isPremium: false,
    isActive: true,
    downloadCount: 889,
    rating: 4.4,
    reviews: 145,
    author: { id: 'admin-001', name: 'Ecomus Team', email: 'admin@ecomus.com' },
    version: '1.8.0',
    compatibility: ['latest', 'v2.0', 'v1.9']
  },
  {
    name: 'Outdoor Adventures',
    slug: 'home-camp-and-hike',
    description: 'Template outdoor avec guides d\'Ã©quipement et planificateur d\'aventures.',
    category: 'Sports',
    tags: ['outdoor', 'camping', 'hiking'],
    previewImage: '/images/templates/home-camp-and-hike.svg',
    previewUrl: '/preview/home-camp-and-hike',
    components: { sections: ['adventure-hero', 'gear-guide', 'trip-planner'], layout: 'outdoor' },
    features: ['Gear Guide', 'Trip Planner', 'Weather Integration'],
    price: 49,
    isPremium: true,
    isActive: true,
    downloadCount: 323,
    rating: 4.8,
    reviews: 67,
    author: { id: 'outdoor-expert-001', name: 'Jake Wilson', email: 'jake@ecomus.com' },
    version: '1.4.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Ceramic Art Studio',
    slug: 'home-ceramic',
    description: 'Template artisanal pour cÃ©ramiques avec galerie d\'Å“uvres et processus de crÃ©ation.',
    category: 'Art',
    tags: ['ceramic', 'art', 'handmade'],
    previewImage: '/images/templates/home-ceramic.svg',
    previewUrl: '/preview/home-ceramic',
    components: { sections: ['art-hero', 'gallery', 'process'], layout: 'artisan' },
    features: ['Artist Gallery', 'Creation Process', 'Custom Orders'],
    price: 59,
    isPremium: true,
    isActive: true,
    downloadCount: 156,
    rating: 4.9,
    reviews: 23,
    author: { id: 'artist-001', name: 'Elena Vasquez', email: 'elena@ecomus.com' },
    version: '1.2.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Cosmetic Lab',
    slug: 'home-cosmetic',
    description: 'Template cosmÃ©tiques avancÃ© avec analyseur de peau et essayage virtuel.',
    category: 'Beauty',
    tags: ['cosmetic', 'skincare', 'virtual-try'],
    previewImage: '/images/templates/home-cosmetic.svg',
    previewUrl: '/preview/home-cosmetic',
    components: { sections: ['beauty-lab', 'skin-analyzer', 'virtual-try'], layout: 'beauty-tech' },
    features: ['Skin Analysis', 'Virtual Try-On', 'Ingredient Encyclopedia'],
    price: 79,
    isPremium: true,
    isActive: true,
    downloadCount: 445,
    rating: 4.7,
    reviews: 89,
    author: { id: 'beauty-tech-001', name: 'Dr. Lisa Chen', email: 'lisa@ecomus.com' },
    version: '2.0.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Home Decor Haven',
    slug: 'home-decor',
    description: 'Template dÃ©coration avec visualiseur de piÃ¨ces et conseils d\'amÃ©nagement.',
    category: 'Home',
    tags: ['decor', 'interior', 'design'],
    previewImage: '/images/templates/home-decor.svg',
    previewUrl: '/preview/home-decor',
    components: { sections: ['decor-hero', 'room-ideas', 'style-guide'], layout: 'interior' },
    features: ['Room Visualizer', 'Style Guide', 'Design Tips'],
    price: 45,
    isPremium: true,
    isActive: true,
    downloadCount: 567,
    rating: 4.5,
    reviews: 123,
    author: { id: 'interior-designer-001', name: 'Amanda Clark', email: 'amanda@ecomus.com' },
    version: '1.6.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Pet Paradise',
    slug: 'home-dog-accessories',
    description: 'Template animalerie avec guides de races et conseils vÃ©tÃ©rinaires.',
    category: 'Pets',
    tags: ['pets', 'dogs', 'accessories'],
    previewImage: '/images/templates/home-dog-accessories.svg',
    previewUrl: '/preview/home-dog-accessories',
    components: { sections: ['pet-hero', 'breed-guide', 'care-tips'], layout: 'pet-care' },
    features: ['Breed Guide', 'Care Calendar', 'Vet Advice'],
    price: 35,
    isPremium: true,
    isActive: true,
    downloadCount: 234,
    rating: 4.6,
    reviews: 56,
    author: { id: 'vet-expert-001', name: 'Dr. Michael Parker', email: 'michael@ecomus.com' },
    version: '1.4.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'E-Bike Revolution',
    slug: 'home-electric-bike',
    description: 'Template vÃ©los Ã©lectriques avec calculateur d\'autonomie et carte des stations.',
    category: 'Sports',
    tags: ['e-bike', 'electric', 'mobility'],
    previewImage: '/images/templates/home-electric-bike.svg',
    previewUrl: '/preview/home-electric-bike',
    components: { sections: ['ebike-hero', 'range-calculator', 'station-map'], layout: 'mobility' },
    features: ['Range Calculator', 'Station Finder', 'Maintenance Tips'],
    price: 55,
    isPremium: true,
    isActive: true,
    downloadCount: 178,
    rating: 4.7,
    reviews: 34,
    author: { id: 'mobility-expert-001', name: 'Tom Anderson', email: 'tom@ecomus.com' },
    version: '1.3.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Electronics Hub',
    slug: 'home-electronic',
    description: 'Template Ã©lectronique complet avec comparateur et support technique.',
    category: 'Tech',
    tags: ['electronics', 'gadgets', 'tech-support'],
    previewImage: '/images/templates/home-electronic.svg',
    previewUrl: '/preview/home-electronic',
    components: { sections: ['tech-hero', 'product-compare', 'support'], layout: 'electronics' },
    features: ['Product Comparison', 'Tech Support', 'Warranty Tracking'],
    price: 45,
    isPremium: true,
    isActive: true,
    downloadCount: 789,
    rating: 4.6,
    reviews: 167,
    author: { id: 'tech-expert-001', name: 'David Kim', email: 'david@ecomus.com' },
    version: '1.9.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Gourmet Food Market',
    slug: 'home-food',
    description: 'Template gastronomique avec fiches recettes et accords mets-vins.',
    category: 'Food',
    tags: ['gourmet', 'recipes', 'wine-pairing'],
    previewImage: '/images/templates/home-food.svg',
    previewUrl: '/preview/home-food',
    components: { sections: ['gourmet-hero', 'recipes', 'wine-pairing'], layout: 'gourmet' },
    features: ['Recipe Cards', 'Wine Pairing', 'Chef Recommendations'],
    price: 39,
    isPremium: true,
    isActive: true,
    downloadCount: 345,
    rating: 4.8,
    reviews: 78,
    author: { id: 'chef-001', name: 'Chef Antoine Dubois', email: 'antoine@ecomus.com' },
    version: '1.5.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Footwear Fashion',
    slug: 'home-footwear',
    description: 'Template chaussures avec guide des tailles et essayage virtuel 3D.',
    category: 'Fashion',
    tags: ['footwear', 'shoes', 'size-guide'],
    previewImage: '/images/templates/home-footwear.svg',
    previewUrl: '/preview/home-footwear',
    components: { sections: ['shoe-hero', 'size-guide', 'virtual-try'], layout: 'footwear' },
    features: ['3D Try-On', 'Size Calculator', 'Comfort Rating'],
    price: 49,
    isPremium: true,
    isActive: true,
    downloadCount: 456,
    rating: 4.5,
    reviews: 89,
    author: { id: 'footwear-expert-001', name: 'Maria Rodriguez', email: 'maria@ecomus.com' },
    version: '1.6.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Luxury Furniture',
    slug: 'home-furniture-02',
    description: 'Template mobilier haut de gamme avec configurateur personnalisÃ© et livraison premium.',
    category: 'Home',
    tags: ['luxury-furniture', 'premium', 'custom'],
    previewImage: '/images/templates/home-furniture-02.svg',
    previewUrl: '/preview/home-furniture-02',
    components: { sections: ['luxury-furniture-hero', 'custom-config', 'premium-service'], layout: 'luxury-furniture' },
    features: ['Custom Configuration', 'Premium Materials', 'White Glove Delivery'],
    price: 89,
    isPremium: true,
    isActive: true,
    downloadCount: 123,
    rating: 4.9,
    reviews: 34,
    author: { id: 'luxury-designer-001', name: 'Giorgio Armani Casa', email: 'giorgio@ecomus.com' },
    version: '1.2.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Gaming Gear Central',
    slug: 'home-gaming-accessories',
    description: 'Template gaming avec tests de performance et communautÃ© de joueurs.',
    category: 'Tech',
    tags: ['gaming', 'esports', 'accessories'],
    previewImage: '/images/templates/home-gaming-accessories.svg',
    previewUrl: '/preview/home-gaming-accessories',
    components: { sections: ['gaming-hero', 'performance-tests', 'community'], layout: 'gaming' },
    features: ['Performance Benchmarks', 'Gaming Community', 'Pro Reviews'],
    price: 59,
    isPremium: true,
    isActive: true,
    downloadCount: 678,
    rating: 4.8,
    reviews: 234,
    author: { id: 'gaming-expert-001', name: 'Alex "ProGamer" Johnson', email: 'alex.progamer@ecomus.com' },
    version: '1.7.0',
    compatibility: ['latest', 'v2.0']
  },
  // Continuation des templates (25 templates supplÃ©mentaires)
  {
    name: 'Gift Card Store',
    slug: 'home-giftcard',
    description: 'Template cartes cadeaux avec personnalisation et envoi automatique.',
    category: 'Business',
    tags: ['giftcard', 'gifts', 'personalization'],
    previewImage: '/images/templates/home-giftcard.svg',
    previewUrl: '/preview/home-giftcard',
    components: { sections: ['gift-hero', 'card-designer', 'delivery-options'], layout: 'gift' },
    features: ['Card Designer', 'Scheduled Delivery', 'Custom Messages'],
    price: 0,
    isPremium: false,
    isActive: true,
    downloadCount: 567,
    rating: 4.3,
    reviews: 89,
    author: { id: 'admin-001', name: 'Ecomus Team', email: 'admin@ecomus.com' },
    version: '1.4.0',
    compatibility: ['latest', 'v2.0', 'v1.9']
  },
  {
    name: 'Eyewear Boutique',
    slug: 'home-glasses',
    description: 'Template lunettes avec essayage virtuel et guide de morphologie.',
    category: 'Fashion',
    tags: ['glasses', 'eyewear', 'virtual-try'],
    previewImage: '/images/templates/home-glasses.svg',
    previewUrl: '/preview/home-glasses',
    components: { sections: ['eyewear-hero', 'face-scan', 'prescription'], layout: 'eyewear' },
    features: ['Virtual Try-On', 'Face Shape Guide', 'Prescription Upload'],
    price: 65,
    isPremium: true,
    isActive: true,
    downloadCount: 234,
    rating: 4.7,
    reviews: 45,
    author: { id: 'eyewear-expert-001', name: 'Dr. Sarah Vision', email: 'sarah.vision@ecomus.com' },
    version: '1.5.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Fresh Grocery Market',
    slug: 'home-grocery',
    description: 'Template Ã©picerie avec livraison express et gestion de la fraÃ®cheur.',
    category: 'Food',
    tags: ['grocery', 'fresh', 'delivery'],
    previewImage: '/images/templates/home-grocery.svg',
    previewUrl: '/preview/home-grocery',
    components: { sections: ['grocery-hero', 'fresh-tracking', 'delivery-slots'], layout: 'grocery' },
    features: ['Freshness Tracking', 'Express Delivery', 'Shopping Lists'],
    price: 29,
    isPremium: true,
    isActive: true,
    downloadCount: 1234,
    rating: 4.4,
    reviews: 189,
    author: { id: 'grocery-expert-001', name: 'Frank Fresh', email: 'frank@ecomus.com' },
    version: '1.8.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Designer Handbags',
    slug: 'home-handbag',
    description: 'Template maroquinerie de luxe avec authentification et programme fidÃ©litÃ©.',
    category: 'Fashion',
    tags: ['handbags', 'luxury', 'authentication'],
    previewImage: '/images/templates/home-handbag.svg',
    previewUrl: '/preview/home-handbag',
    components: { sections: ['luxury-handbag-hero', 'authenticity', 'care-guide'], layout: 'luxury-fashion' },
    features: ['Authenticity Certificate', 'Care Instructions', 'VIP Program'],
    price: 85,
    isPremium: true,
    isActive: true,
    downloadCount: 156,
    rating: 4.8,
    reviews: 34,
    author: { id: 'luxury-fashion-001', name: 'Coco Designer', email: 'coco@ecomus.com' },
    version: '1.3.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Audio Headphones',
    slug: 'home-headphone',
    description: 'Template audio avec tests sonores et comparateur de frÃ©quences.',
    category: 'Tech',
    tags: ['headphones', 'audio', 'sound-test'],
    previewImage: '/images/templates/home-headphone.svg',
    previewUrl: '/preview/home-headphone',
    components: { sections: ['audio-hero', 'sound-test', 'frequency-chart'], layout: 'audio' },
    features: ['Sound Testing', 'Frequency Analysis', 'Listening Guides'],
    price: 45,
    isPremium: true,
    isActive: true,
    downloadCount: 445,
    rating: 4.6,
    reviews: 78,
    author: { id: 'audio-expert-001', name: 'Mike SoundWave', email: 'mike@ecomus.com' },
    version: '1.6.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Fine Jewelry',
    slug: 'home-jewerly',
    description: 'Template bijouterie fine avec certificats de gemmes et service personnalisation.',
    category: 'Luxury',
    tags: ['jewelry', 'gems', 'certification'],
    previewImage: '/images/templates/home-jewerly.svg',
    previewUrl: '/preview/home-jewerly',
    components: { sections: ['fine-jewelry-hero', 'gem-certificates', 'custom-design'], layout: 'fine-jewelry' },
    features: ['Gem Certification', 'Custom Design', 'Appraisal Service'],
    price: 95,
    isPremium: true,
    isActive: true,
    downloadCount: 123,
    rating: 4.9,
    reviews: 27,
    author: { id: 'jewelry-expert-001', name: 'Diamond Joe', email: 'diamond.joe@ecomus.com' },
    version: '1.4.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Kids Fashion Hub',
    slug: 'home-kids',
    description: 'Template mode enfant avec guide des tailles et vÃªtements Ã©volutifs.',
    category: 'Kids',
    tags: ['kids-fashion', 'growth-guide', 'sustainable'],
    previewImage: '/images/templates/home-kids.svg',
    previewUrl: '/preview/home-kids',
    components: { sections: ['kids-fashion-hero', 'growth-tracker', 'eco-materials'], layout: 'kids-fashion' },
    features: ['Growth Tracking', 'Size Predictor', 'Eco Materials'],
    price: 35,
    isPremium: true,
    isActive: true,
    downloadCount: 678,
    rating: 4.5,
    reviews: 134,
    author: { id: 'kids-fashion-001', name: 'Jenny Kids', email: 'jenny@ecomus.com' },
    version: '1.7.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Kitchen & Cookware',
    slug: 'home-kitchen-wear',
    description: 'Template ustensiles de cuisine avec guides de recettes et conseils chef.',
    category: 'Home',
    tags: ['kitchen', 'cookware', 'recipes'],
    previewImage: '/images/templates/home-kitchen-wear.svg',
    previewUrl: '/preview/home-kitchen-wear',
    components: { sections: ['kitchen-hero', 'recipe-library', 'chef-tips'], layout: 'culinary' },
    features: ['Recipe Integration', 'Chef Videos', 'Cooking Timer'],
    price: 39,
    isPremium: true,
    isActive: true,
    downloadCount: 345,
    rating: 4.6,
    reviews: 89,
    author: { id: 'culinary-expert-001', name: 'Chef Gordon', email: 'gordon@ecomus.com' },
    version: '1.5.4',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Men\'s Fashion',
    slug: 'home-men',
    description: 'Template mode masculine avec guide de style et conseils personnalisation.',
    category: 'Fashion',
    tags: ['mens-fashion', 'style-guide', 'tailoring'],
    previewImage: '/images/templates/home-men.svg',
    previewUrl: '/preview/home-men',
    components: { sections: ['mens-hero', 'style-advisor', 'fit-guide'], layout: 'mens-fashion' },
    features: ['Style Advisor', 'Fit Calculator', 'Personal Shopper'],
    price: 49,
    isPremium: true,
    isActive: true,
    downloadCount: 567,
    rating: 4.4,
    reviews: 123,
    author: { id: 'mens-fashion-001', name: 'Stylish Steve', email: 'steve@ecomus.com' },
    version: '1.6.5',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Multi-Brand Marketplace',
    slug: 'home-multi-brand',
    description: 'Template marketplace multi-marques avec gestion vendeurs et systÃ¨me de commissions.',
    category: 'Business',
    tags: ['marketplace', 'multi-brand', 'vendors'],
    previewImage: '/images/templates/home-multi-brand.svg',
    previewUrl: '/preview/home-multi-brand',
    components: { sections: ['marketplace-hero', 'brand-showcase', 'vendor-hub'], layout: 'marketplace' },
    features: ['Vendor Management', 'Commission System', 'Brand Stories'],
    price: 0,
    isPremium: false,
    isActive: true,
    downloadCount: 890,
    rating: 4.2,
    reviews: 167,
    author: { id: 'admin-001', name: 'Ecomus Team', email: 'admin@ecomus.com' },
    version: '2.1.0',
    compatibility: ['latest', 'v2.0', 'v1.9']
  },
  {
    name: 'Paddle Board Shop',
    slug: 'home-paddle-boards',
    description: 'Template sports nautiques avec guide conditions mÃ©tÃ©o et spots de pratique.',
    category: 'Sports',
    tags: ['paddle-board', 'water-sports', 'weather'],
    previewImage: '/images/templates/home-paddle-boards.svg',
    previewUrl: '/preview/home-paddle-boards',
    components: { sections: ['water-sports-hero', 'weather-conditions', 'spot-finder'], layout: 'water-sports' },
    features: ['Weather Integration', 'Spot Finder', 'Safety Guide'],
    price: 55,
    isPremium: true,
    isActive: true,
    downloadCount: 234,
    rating: 4.7,
    reviews: 45,
    author: { id: 'watersports-expert-001', name: 'Wave Rider', email: 'wave@ecomus.com' },
    version: '1.4.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Custom Print Pod',
    slug: 'home-personalized-pod',
    description: 'Template impression Ã  la demande avec designer intÃ©grÃ© et prÃ©visualisation 3D.',
    category: 'Business',
    tags: ['print-on-demand', 'custom', '3d-preview'],
    previewImage: '/images/templates/home-personalized-pod.svg',
    previewUrl: '/preview/home-personalized-pod',
    components: { sections: ['pod-hero', 'design-studio', '3d-preview'], layout: 'print-on-demand' },
    features: ['Design Studio', '3D Preview', 'Template Library'],
    price: 69,
    isPremium: true,
    isActive: true,
    downloadCount: 445,
    rating: 4.5,
    reviews: 89,
    author: { id: 'print-expert-001', name: 'Creative Print', email: 'creative@ecomus.com' },
    version: '1.8.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Phone Case Designer',
    slug: 'home-phonecase',
    description: 'Template coques de tÃ©lÃ©phone avec designer personnalisÃ© et tests de protection.',
    category: 'Tech',
    tags: ['phone-case', 'custom-design', 'protection'],
    previewImage: '/images/templates/home-phonecase.svg',
    previewUrl: '/preview/home-phonecase',
    components: { sections: ['phonecase-hero', 'case-designer', 'protection-test'], layout: 'mobile-accessories' },
    features: ['Case Designer', 'Protection Rating', 'Device Compatibility'],
    price: 35,
    isPremium: true,
    isActive: true,
    downloadCount: 678,
    rating: 4.4,
    reviews: 156,
    author: { id: 'mobile-expert-001', name: 'Case Master', email: 'case@ecomus.com' },
    version: '1.6.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Pickleball Pro Shop',
    slug: 'home-pickleball',
    description: 'Template pickleball avec rÃ¨gles du jeu et communautÃ© de joueurs.',
    category: 'Sports',
    tags: ['pickleball', 'rules', 'community'],
    previewImage: '/images/templates/home-pickleball.svg',
    previewUrl: '/preview/home-pickleball',
    components: { sections: ['pickleball-hero', 'rules-guide', 'player-community'], layout: 'racket-sports' },
    features: ['Rules Guide', 'Player Community', 'Court Finder'],
    price: 45,
    isPremium: true,
    isActive: true,
    downloadCount: 123,
    rating: 4.8,
    reviews: 34,
    author: { id: 'pickleball-expert-001', name: 'Paddle Pro', email: 'paddle@ecomus.com' },
    version: '1.3.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Plant Nursery',
    slug: 'home-plant',
    description: 'Template pÃ©piniÃ¨re avec guide d\'entretien et calendrier de plantation.',
    category: 'Garden',
    tags: ['plants', 'gardening', 'care-guide'],
    previewImage: '/images/templates/home-plant.svg',
    previewUrl: '/preview/home-plant',
    components: { sections: ['garden-hero', 'plant-care', 'seasonal-calendar'], layout: 'gardening' },
    features: ['Plant Care Guide', 'Watering Reminders', 'Seasonal Calendar'],
    price: 0,
    isPremium: false,
    isActive: true,
    downloadCount: 567,
    rating: 4.6,
    reviews: 123,
    author: { id: 'admin-001', name: 'Ecomus Team', email: 'admin@ecomus.com' },
    version: '1.7.0',
    compatibility: ['latest', 'v2.0', 'v1.9']
  },
  {
    name: 'POD Store Hub',
    slug: 'home-pod-store',
    description: 'Template store POD avec catalogue Ã©tendu et gestion multi-produits.',
    category: 'Business',
    tags: ['pod', 'print-on-demand', 'multi-product'],
    previewImage: '/images/templates/home-pod-store.svg',
    previewUrl: '/preview/home-pod-store',
    components: { sections: ['pod-hero', 'product-catalog', 'design-templates'], layout: 'pod-marketplace' },
    features: ['Product Catalog', 'Design Templates', 'Bulk Orders'],
    price: 79,
    isPremium: true,
    isActive: true,
    downloadCount: 234,
    rating: 4.5,
    reviews: 56,
    author: { id: 'pod-expert-001', name: 'POD Master', email: 'pod@ecomus.com' },
    version: '1.6.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Search & Discovery',
    slug: 'home-search',
    description: 'Template axÃ© recherche avec IA et recommandations intelligentes.',
    category: 'Tech',
    tags: ['search', 'ai', 'discovery'],
    previewImage: '/images/templates/home-search.svg',
    previewUrl: '/preview/home-search',
    components: { sections: ['search-hero', 'ai-recommendations', 'smart-filters'], layout: 'search-focused' },
    features: ['AI Search', 'Smart Recommendations', 'Advanced Filters'],
    price: 89,
    isPremium: true,
    isActive: true,
    downloadCount: 345,
    rating: 4.7,
    reviews: 78,
    author: { id: 'ai-expert-001', name: 'Search Engine Pro', email: 'search@ecomus.com' },
    version: '2.1.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Setup Gear Pro',
    slug: 'home-setup-gear',
    description: 'Template Ã©quipements setup avec guides installation et compatibilitÃ©.',
    category: 'Tech',
    tags: ['setup', 'gear', 'installation'],
    previewImage: '/images/templates/home-setup-gear.svg',
    previewUrl: '/preview/home-setup-gear',
    components: { sections: ['setup-hero', 'compatibility-check', 'installation-guide'], layout: 'tech-setup' },
    features: ['Compatibility Checker', 'Installation Guide', 'Setup Wizard'],
    price: 55,
    isPremium: true,
    isActive: true,
    downloadCount: 123,
    rating: 4.6,
    reviews: 34,
    author: { id: 'setup-expert-001', name: 'Tech Setup', email: 'setup@ecomus.com' },
    version: '1.4.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Skateboard Culture',
    slug: 'home-skateboard',
    description: 'Template skateboard avec tricks guide et communautÃ© de skaters.',
    category: 'Sports',
    tags: ['skateboard', 'tricks', 'culture'],
    previewImage: '/images/templates/home-skateboard.svg',
    previewUrl: '/preview/home-skateboard',
    components: { sections: ['skate-hero', 'tricks-library', 'skater-community'], layout: 'street-culture' },
    features: ['Tricks Library', 'Skater Community', 'Spot Finder'],
    price: 45,
    isPremium: true,
    isActive: true,
    downloadCount: 278,
    rating: 4.8,
    reviews: 67,
    author: { id: 'skate-expert-001', name: 'Street Rider', email: 'skate@ecomus.com' },
    version: '1.5.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Sneaker Drops',
    slug: 'home-sneaker',
    description: 'Template sneakers avec alertes drops et authentification.',
    category: 'Fashion',
    tags: ['sneakers', 'drops', 'authentication'],
    previewImage: '/images/templates/home-sneaker.svg',
    previewUrl: '/preview/home-sneaker',
    components: { sections: ['sneaker-hero', 'drop-alerts', 'auth-check'], layout: 'sneaker-culture' },
    features: ['Drop Alerts', 'Authentication', 'Resale Market'],
    price: 69,
    isPremium: true,
    isActive: true,
    downloadCount: 567,
    rating: 4.7,
    reviews: 145,
    author: { id: 'sneaker-expert-001', name: 'Sneaker Head', email: 'sneaker@ecomus.com' },
    version: '1.8.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Baby Stroller Store',
    slug: 'home-stroller',
    description: 'Template poussettes avec guide sÃ©curitÃ© et comparateur modÃ¨les.',
    category: 'Kids',
    tags: ['stroller', 'baby', 'safety'],
    previewImage: '/images/templates/home-stroller.svg',
    previewUrl: '/preview/home-stroller',
    components: { sections: ['stroller-hero', 'safety-guide', 'model-comparison'], layout: 'baby-gear' },
    features: ['Safety Ratings', 'Model Comparison', 'Age Suitability'],
    price: 49,
    isPremium: true,
    isActive: true,
    downloadCount: 189,
    rating: 4.6,
    reviews: 45,
    author: { id: 'baby-gear-expert-001', name: 'Safe Baby', email: 'safebaby@ecomus.com' },
    version: '1.4.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Premium Shoes',
    slug: 'home-shoes',
    description: 'Template chaussures premium avec guide d\'entretien et garantie Ã©tendue.',
    category: 'Fashion',
    tags: ['premium-shoes', 'care-guide', 'warranty'],
    previewImage: '/images/templates/home-shoes.svg',
    previewUrl: '/preview/home-shoes',
    components: { sections: ['premium-shoes-hero', 'care-instructions', 'warranty-info'], layout: 'premium-footwear' },
    features: ['Care Instructions', 'Extended Warranty', 'Repair Service'],
    price: 75,
    isPremium: true,
    isActive: true,
    downloadCount: 345,
    rating: 4.7,
    reviews: 67,
    author: { id: 'premium-footwear-001', name: 'Luxury Steps', email: 'luxury@ecomus.com' },
    version: '1.5.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Skincare Science',
    slug: 'home-skincare',
    description: 'Template soins de la peau avec analyseur et routines personnalisÃ©es.',
    category: 'Beauty',
    tags: ['skincare', 'analysis', 'routine'],
    previewImage: '/images/templates/home-skincare.svg',
    previewUrl: '/preview/home-skincare',
    components: { sections: ['skincare-hero', 'skin-analysis', 'routine-builder'], layout: 'skincare' },
    features: ['Skin Analysis', 'Routine Builder', 'Progress Tracking'],
    price: 59,
    isPremium: true,
    isActive: true,
    downloadCount: 789,
    rating: 4.8,
    reviews: 234,
    author: { id: 'skincare-expert-001', name: 'Dr. Glow', email: 'dr.glow@ecomus.com' },
    version: '2.0.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Sock Boutique',
    slug: 'home-sock',
    description: 'Template chaussettes avec abonnement mensuel et guide confort.',
    category: 'Fashion',
    tags: ['socks', 'subscription', 'comfort'],
    previewImage: '/images/templates/home-sock.svg',
    previewUrl: '/preview/home-sock',
    components: { sections: ['sock-hero', 'subscription-box', 'comfort-guide'], layout: 'subscription' },
    features: ['Subscription Box', 'Comfort Guide', 'Monthly Themes'],
    price: 25,
    isPremium: true,
    isActive: true,
    downloadCount: 456,
    rating: 4.3,
    reviews: 89,
    author: { id: 'sock-expert-001', name: 'Cozy Feet', email: 'cozy@ecomus.com' },
    version: '1.4.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Speaker Sound System',
    slug: 'home-speaker',
    description: 'Template haut-parleurs avec configurateur audio et tests acoustiques.',
    category: 'Tech',
    tags: ['speakers', 'audio-config', 'acoustics'],
    previewImage: '/images/templates/home-speaker.svg',
    previewUrl: '/preview/home-speaker',
    components: { sections: ['speaker-hero', 'audio-config', 'room-acoustics'], layout: 'audio-pro' },
    features: ['Room Configuration', 'Acoustic Testing', 'Sound Optimization'],
    price: 65,
    isPremium: true,
    isActive: true,
    downloadCount: 234,
    rating: 4.6,
    reviews: 45,
    author: { id: 'audio-pro-001', name: 'Sound Engineer', email: 'sound@ecomus.com' },
    version: '1.7.3',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Surfboard Shaper',
    slug: 'home-surfboard',
    description: 'Template planches de surf avec conditions de vagues et Ã©cole de surf.',
    category: 'Sports',
    tags: ['surfboard', 'waves', 'surf-school'],
    previewImage: '/images/templates/home-surfboard.svg',
    previewUrl: '/preview/home-surfboard',
    components: { sections: ['surf-hero', 'wave-forecast', 'surf-lessons'], layout: 'surf' },
    features: ['Wave Forecast', 'Surf Lessons', 'Board Shaping'],
    price: 55,
    isPremium: true,
    isActive: true,
    downloadCount: 178,
    rating: 4.9,
    reviews: 23,
    author: { id: 'surf-expert-001', name: 'Wave Master', email: 'wave.master@ecomus.com' },
    version: '1.4.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Swimwear Collection',
    slug: 'home-swimwear',
    description: 'Template maillots de bain avec guide des tailles et protection UV.',
    category: 'Fashion',
    tags: ['swimwear', 'uv-protection', 'size-guide'],
    previewImage: '/images/templates/home-swimwear.svg',
    previewUrl: '/preview/home-swimwear',
    components: { sections: ['swimwear-hero', 'uv-guide', 'beach-ready'], layout: 'beachwear' },
    features: ['UV Protection Guide', 'Fit Calculator', 'Beach Style Tips'],
    price: 39,
    isPremium: true,
    isActive: true,
    downloadCount: 445,
    rating: 4.5,
    reviews: 78,
    author: { id: 'swimwear-expert-001', name: 'Beach Babe', email: 'beach@ecomus.com' },
    version: '1.6.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'T-Shirt Design Studio',
    slug: 'home-tee',
    description: 'Template t-shirts avec studio de design et impression Ã©cologique.',
    category: 'Fashion',
    tags: ['t-shirt', 'design-studio', 'eco-print'],
    previewImage: '/images/templates/home-tee.svg',
    previewUrl: '/preview/home-tee',
    components: { sections: ['tee-hero', 'design-tools', 'eco-materials'], layout: 'apparel-design' },
    features: ['Design Studio', 'Eco Materials', 'Bulk Orders'],
    price: 35,
    isPremium: true,
    isActive: true,
    downloadCount: 678,
    rating: 4.4,
    reviews: 134,
    author: { id: 'apparel-designer-001', name: 'Tee Creative', email: 'tee@ecomus.com' },
    version: '1.8.1',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Underwear Essentials',
    slug: 'home-underwear',
    description: 'Template sous-vÃªtements avec guide comfort et programme d\'abonnement.',
    category: 'Fashion',
    tags: ['underwear', 'comfort', 'subscription'],
    previewImage: '/images/templates/home-underwear.svg',
    previewUrl: '/preview/home-underwear',
    components: { sections: ['underwear-hero', 'comfort-tech', 'subscription-plan'], layout: 'intimates' },
    features: ['Comfort Technology', 'Subscription Plans', 'Size Optimization'],
    price: 29,
    isPremium: true,
    isActive: true,
    downloadCount: 345,
    rating: 4.3,
    reviews: 67,
    author: { id: 'intimates-expert-001', name: 'Comfort Zone', email: 'comfort@ecomus.com' },
    version: '1.5.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Luxury Watches',
    slug: 'home-watch',
    description: 'Template montres de luxe avec certificats d\'authenticitÃ© et service horloger.',
    category: 'Luxury',
    tags: ['watches', 'luxury', 'authenticity'],
    previewImage: '/images/templates/home-watch.svg',
    previewUrl: '/preview/home-watch',
    components: { sections: ['luxury-watch-hero', 'authenticity-check', 'horologist-service'], layout: 'luxury-timepiece' },
    features: ['Authenticity Verification', 'Horologist Service', 'Investment Tracking'],
    price: 125,
    isPremium: true,
    isActive: true,
    downloadCount: 89,
    rating: 5.0,
    reviews: 16,
    author: { id: 'luxury-watch-001', name: 'Master Horologist', email: 'master@ecomus.com' },
    version: '1.2.0',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Women\'s Fashion',
    slug: 'home-women',
    description: 'Template mode fÃ©minine avec conseil en style et service personal shopping.',
    category: 'Fashion',
    tags: ['womens-fashion', 'style-advice', 'personal-shopping'],
    previewImage: '/images/templates/home-women.svg',
    previewUrl: '/preview/home-women',
    components: { sections: ['womens-hero', 'style-consultant', 'virtual-wardrobe'], layout: 'womens-fashion' },
    features: ['Style Consultant', 'Virtual Wardrobe', 'Trend Alerts'],
    price: 49,
    isPremium: true,
    isActive: true,
    downloadCount: 1234,
    rating: 4.6,
    reviews: 234,
    author: { id: 'womens-fashion-001', name: 'Fashion Guru', email: 'fashion@ecomus.com' },
    version: '1.9.2',
    compatibility: ['latest', 'v2.0']
  },
  {
    name: 'Yoga & Wellness',
    slug: 'home-yoga',
    description: 'Template yoga avec cours en ligne et suivi de progression.',
    category: 'Sports',
    tags: ['yoga', 'wellness', 'online-classes'],
    previewImage: '/images/templates/home-yoga.svg',
    previewUrl: '/preview/home-yoga',
    components: { sections: ['yoga-hero', 'class-library', 'progress-tracker'], layout: 'wellness' },
    features: ['Online Classes', 'Progress Tracking', 'Meditation Guide'],
    price: 45,
    isPremium: true,
    isActive: true,
    downloadCount: 567,
    rating: 4.7,
    reviews: 145,
    author: { id: 'yoga-expert-001', name: 'Zen Master', email: 'zen@ecomus.com' },
    version: '1.6.4',
    compatibility: ['latest', 'v2.0']
  }
];

async function connectDB() {
  try {
    const mongoUri = process.env.MONGODB_URI || 'mongodb://localhost:27017/ecomus';
    await mongoose.connect(mongoUri);
    console.log('âœ… Connexion Ã  MongoDB rÃ©ussie');
  } catch (error) {
    console.error('âŒ Erreur de connexion Ã  MongoDB:', error);
    process.exit(1);
  }
}

async function populateTemplates() {
  try {
    console.log('ğŸš€ DÃ©but du peuplement des templates...');

    // VÃ©rifier si des templates existent dÃ©jÃ 
    const existingCount = await Template.countDocuments();
    console.log(`ğŸ“Š Templates existants: ${existingCount}`);

    // InsÃ©rer les nouveaux templates (ou les mettre Ã  jour)
    for (const templateData of templatesToInsert) {
      try {
        const existingTemplate = await Template.findOne({ slug: templateData.slug });
        
        if (existingTemplate) {
          // Mettre Ã  jour le template existant
          await Template.findOneAndUpdate(
            { slug: templateData.slug },
            templateData,
            { new: true, upsert: true }
          );
          console.log(`ğŸ”„ Template mis Ã  jour: ${templateData.name}`);
        } else {
          // CrÃ©er un nouveau template
          await Template.create(templateData);
          console.log(`âœ… Template crÃ©Ã©: ${templateData.name}`);
        }
      } catch (error) {
        console.error(`âŒ Erreur pour ${templateData.name}:`, error.message);
      }
    }

    // Statistiques finales
    const finalCount = await Template.countDocuments();
    const activeCount = await Template.countDocuments({ isActive: true });
    const premiumCount = await Template.countDocuments({ isPremium: true });
    
    console.log('\nğŸ“ˆ Statistiques finales:');
    console.log(`   Total templates: ${finalCount}`);
    console.log(`   Templates actifs: ${activeCount}`);
    console.log(`   Templates premium: ${premiumCount}`);
    console.log(`   Templates gratuits: ${finalCount - premiumCount}`);
    
    // Statistiques par catÃ©gorie
    const categories = await Template.aggregate([
      { $group: { _id: '$category', count: { $sum: 1 } } },
      { $sort: { count: -1 } }
    ]);
    
    console.log('\nğŸ“Š RÃ©partition par catÃ©gorie:');
    categories.forEach(cat => {
      console.log(`   ${cat._id}: ${cat.count} templates`);
    });

    console.log('\nğŸ‰ Peuplement terminÃ© avec succÃ¨s!');
    
  } catch (error) {
    console.error('âŒ Erreur lors du peuplement:', error);
  }
}

async function main() {
  await connectDB();
  await populateTemplates();
  await mongoose.disconnect();
  console.log('ğŸ‘‹ DÃ©connexion de MongoDB');
}

// ExÃ©cution du script
if (require.main === module) {
  main().catch(console.error);
}

module.exports = { populateTemplates };
